@page "/company/create"
@page "/company/edit/{CompCode}"
@using DevShop.Data
@inject IUnitOfWork uow
@inject NavigationManager nav



<h3>CompanyEditView</h3>



<EditForm Model="company" OnValidSubmit="Save" OnInvalidSubmit="InvalidSubmit">
    @if (_invalid)
    {
        <div>
            <b>
                The given data is invalid.<br>
                Please make sure to fill out the fields correctly.
            </b>
        </div>
    }

    @if (!_edit)
    {
        @*
            Pattern matches:
            at least one and max. three uppercase letters
            followed by exactly four digits
        *@
        <input type="text" placeholder="AT1053" maxlength="7" pattern="^[A-Z]{1,3}[0-9]{4}" @bind="@company.CompCode" required/><br />
    }
    else
    {
        <div>
            @company.CompCode
        </div>
    }

    <input type="text" placeholder="Name" maxlength="250" @bind="company.CompName" required/><br />
    <input type="text" placeholder="Additional name" maxlength="250" @bind="company.CompAddName" /><br />
    <textarea placeholder="Description" maxlength="500" @bind="company.CompDescr"></textarea><br />
    @*
        Pattern matches:
        +
        followed by two or three digits
        optionally followed by a space
        followed by at least one digit
        optionally followed by a space
        followed by no or any amount of digits
        optionally followed by a space
        followed by no or any amount of digits

        e.g.:
        +43 660 5203 444 or
        +436605203444
    *@
    <input type="text" placeholder="+43 660 1234 567" maxlength="30" pattern="^\+[0-9]{2,3}\s?[0-9]+\s?[0-9]*\s?[0-9]*" @bind="company.Tel" /><br />
    <input type="text" placeholder="+43 660 1234 567" maxlength="30" pattern="^\+?[0-9]{0,3}\s?[0-9]*\s?[0-9]*\s?[0-9]*" @bind="company.Fax" /><br />
    <input type="email" placeholder="E-Mail" @bind="company.Mail" /><br />
    @* 
        Pattern matches:
        http or https (case sensitive)
        followed by ://
        followed by at least one letter or digit
        followed by .
        followed by at least one letter or digit
        optionally followed by . and at least one letter or digit

        e.g.:
        https://kolar.co.at or
        http://kormann.at
    *@
    <input type="text" placeholder="https://www.devshop.com" pattern="(?:https?)\:\/\/[[:alnum:]]+\.[[:alnum:]]+(\.[[:alnum:]]+)?" @bind="company.Website" />
    <br /><br />
    <input type="submit" value="Save" /><br />
    <a href="./company">
        Back to overview
    </a>
    @if (_edit)
    {
        <input type="button" value="Delete" @onclick="@(() => Delete())" />
    }
</EditForm>